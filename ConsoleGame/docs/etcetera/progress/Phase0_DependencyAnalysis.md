# Phase 0: äº‹å‰æº–å‚™ - Consoleä¾å­˜é–¢ä¿‚ã®èª¿æŸ»çµæœ

## èª¿æŸ»å®Ÿæ–½æ—¥
2025å¹´10æœˆ17æ—¥

## èª¿æŸ»ç›®çš„
Blazorå¯¾å¿œã¸ã®ç§»è¡Œã«å‘ã‘ã¦ã€æ—¢å­˜ã®CLI RPGã‚²ãƒ¼ãƒ ã«ãŠã‘ã‚‹`Console`ã‚¯ãƒ©ã‚¹ã¸ã®ä¾å­˜é–¢ä¿‚ã¨UIæ··åœ¨ç®‡æ‰€ã‚’æ´—ã„å‡ºã—ã€åˆ†é›¢ãŒå¿…è¦ãªç®‡æ‰€ã‚’ç‰¹å®šã™ã‚‹ã€‚

---

## 1. Consoleä¾å­˜é–¢ä¿‚ã®å…¨ä½“åƒ

### 1.1 Consoleä½¿ç”¨ç®‡æ‰€ã®çµ±è¨ˆ

æ¤œç´¢æ¡ä»¶: `Console.` ã‚’å«ã‚€å…¨ã¦ã®C#ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | Console.WriteLine | Console.ReadLine | Console.ReadKey | Console.Write | åˆè¨ˆ |
|---------|-------------------|------------------|-----------------|---------------|------|
| **UserInteraction.cs** | 11 | 2 | 2 | 3 | 18 |
| **GameSystem.cs** | 13 | 0 | 0 | 0 | 13 |
| **BattleManager.cs** | 9 | 0 | 0 | 0 | 9 |
| **ShopSystem.cs** | 9 | 0 | 2 | 0 | 11 |
| **EventManager.cs** | 4 | 0 | 0 | 0 | 4 |
| **Program.cs** | 6 | 2 | 2 | 1 | 11 |
| **Player.cs** | 3 | 0 | 0 | 0 | 3 |
| **RestSystem.cs** | 2 | 0 | 0 | 0 | 2 |
| **GameRecord.cs** | 4 | 0 | 0 | 0 | 4 |
| **åˆè¨ˆ** | **61** | **4** | **6** | **4** | **75** |

### 1.2 é‡è¦ãªç™ºè¦‹

1. **UserInteraction.cs**: å®Œå…¨ã«CLIä¾å­˜ï¼ˆæœŸå¾…é€šã‚Šï¼‰
2. **GameSystem.cs**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«13ç®‡æ‰€ã®Console.WriteLineãŒæ··åœ¨
3. **BattleManager.cs**: æˆ¦é—˜ãƒ­ã‚¸ãƒƒã‚¯ã«9ç®‡æ‰€ã®Console.WriteLineãŒæ··åœ¨
4. **ShopSystem.cs**: ã‚·ãƒ§ãƒƒãƒ—ãƒ­ã‚¸ãƒƒã‚¯ã«11ç®‡æ‰€ã®Consoleä¾å­˜ãŒæ··åœ¨
5. **Player.cs**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã«3ç®‡æ‰€ã®Console.WriteLineãŒæ··åœ¨ï¼ˆâš ï¸é«˜å„ªå…ˆåº¦ï¼‰

---

## 2. UIæ··åœ¨ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°åˆ†æ

### 2.1 GameSystem.cs

**å½±éŸ¿åº¦**: ğŸ”´ **é«˜**

**å•é¡Œç®‡æ‰€**:
- ã‚»ãƒ¼ãƒ–æ©Ÿèƒ½ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆL33-34ï¼‰
- ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆL52, 57, 72, 104, 108ï¼‰
- ã‚»ãƒ¼ãƒ–å‡¦ç†ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆL120-121, 132, 137ï¼‰
- ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼è¡¨ç¤ºï¼ˆL146-164ï¼‰

**ä¾å­˜é–¢ä¿‚**:
```
GameSystem
â”œâ”€â”€ Console.WriteLine (13ç®‡æ‰€)
â”œâ”€â”€ UserInteraction.SelectGameAction() (L88)
â””â”€â”€ EventManager.TriggerRandomEvent()
```

**åˆ†é›¢æˆ¦ç•¥**:
- `Console.WriteLine` â†’ `GameMessage`ãƒªã‚¹ãƒˆã«å¤‰æ›
- `UserInteraction.SelectGameAction()` â†’ `PlayerAction`ãƒ¢ãƒ‡ãƒ«ã‚’å—ã‘å–ã‚‹è¨­è¨ˆã«å¤‰æ›´
- ã‚»ãƒ¼ãƒ–å‡¦ç†ã®çµæœã‚’`GameState`ã«å«ã‚ã‚‹

---

### 2.2 BattleManager.cs

**å½±éŸ¿åº¦**: ğŸ”´ **é«˜**

**å•é¡Œç®‡æ‰€**:
- æˆ¦é—˜é–‹å§‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆL26ï¼‰
- ã‚¿ãƒ¼ãƒ³ç•ªå·è¡¨ç¤ºï¼ˆL47ï¼‰
- æ”»æ’ƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºï¼ˆL89-91ï¼‰
- æ•µã®æ”»æ’ƒè¡¨ç¤ºï¼ˆL103-105ï¼‰
- æˆ¦é—˜çŠ¶æ…‹è¡¨ç¤ºï¼ˆL113-115ï¼‰
- å‹æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆL123, 137ï¼‰

**ä¾å­˜é–¢ä¿‚**:
```
BattleManager
â”œâ”€â”€ Console.WriteLine (9ç®‡æ‰€)
â”œâ”€â”€ UserInteraction.SelectAttackStrategy() (L81)
â””â”€â”€ GameRecord.RecordWin/RecordLoss() (é™çš„ãƒ¡ã‚½ãƒƒãƒ‰)
```

**åˆ†é›¢æˆ¦ç•¥**:
- `UserInteraction.SelectAttackStrategy()` â†’ `AttackAction`ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹
- æˆ¦é—˜ãƒ­ã‚°ã‚’`BattleState.Messages`ã«è“„ç©
- `BattleResult`ã«è©³ç´°æƒ…å ±ã‚’è¿½åŠ 

---

### 2.3 ShopSystem.cs

**å½±éŸ¿åº¦**: ğŸ”´ **é«˜**

**å•é¡Œç®‡æ‰€**:
- ã‚·ãƒ§ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºï¼ˆL10-18ï¼‰
- ã‚­ãƒ¼å…¥åŠ›å‡¦ç†ï¼ˆL21, 39ï¼‰
- æ­¦å™¨é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆL33-38ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆL54ï¼‰

**ä¾å­˜é–¢ä¿‚**:
```
ShopSystem
â”œâ”€â”€ Console.WriteLine (9ç®‡æ‰€)
â”œâ”€â”€ Console.ReadKey (2ç®‡æ‰€)
â”œâ”€â”€ UserInteraction.ReadPositiveInteger() (L24)
â””â”€â”€ WeaponFactory.CreateWeapon()
```

**åˆ†é›¢æˆ¦ç•¥**:
- å®Œå…¨ã«`ShopAction`ãƒ¢ãƒ‡ãƒ«ãƒ™ãƒ¼ã‚¹ã«å†è¨­è¨ˆ
- ã‚·ãƒ§ãƒƒãƒ—çŠ¶æ…‹ã‚’`ShopState` DTOã§è¡¨ç¾
- UIå±¤ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤‰æ›ã‚’å®Ÿæ–½

---

### 2.4 EventManager.cs

**å½±éŸ¿åº¦**: ğŸŸ¡ **ä¸­**

**å•é¡Œç®‡æ‰€**:
- ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆL42, 70, 78, 84, 97ï¼‰

**ä¾å­˜é–¢ä¿‚**:
```
EventManager
â”œâ”€â”€ Console.WriteLine (4ç®‡æ‰€)
â”œâ”€â”€ ShopSystem.Shop() (é™çš„ãƒ¡ã‚½ãƒƒãƒ‰)
â”œâ”€â”€ BattleManager.StartBattle()
â””â”€â”€ RestSystem.UsePotion() (é™çš„ãƒ¡ã‚½ãƒƒãƒ‰)
```

**åˆ†é›¢æˆ¦ç•¥**:
- `Console.WriteLine` â†’ `GameState.Messages`ã«å¤‰æ›
- `ShopSystem.Shop()`ã¨`RestSystem.UsePotion()`ã®å‘¼ã³å‡ºã—ã‚’GameServiceã«ç§»è­²

---

### 2.5 Player.cs (ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«)

**å½±éŸ¿åº¦**: ğŸ”´ **é«˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³æ±šæŸ“ï¼‰**

**å•é¡Œç®‡æ‰€**:
- `TakeDamage()`å†…ã®Console.WriteLineï¼ˆL96ï¼‰
- `UsePotion()`å†…ã®Console.WriteLineï¼ˆL113ï¼‰
- `ShowInfo()`å†…ã®Console.WriteLineï¼ˆL167ä»¥é™ï¼‰

**ä¾å­˜é–¢ä¿‚**:
```
Player (IPlayerå®Ÿè£…)
â””â”€â”€ Console.WriteLine (3ç®‡æ‰€)
```

**åˆ†é›¢æˆ¦ç•¥**:
- `TakeDamage()`ã¨`UsePotion()`ã‹ã‚‰Console.WriteLineã‚’å®Œå…¨å‰Šé™¤
- `ShowInfo()`ã¯å»ƒæ­¢ã—ã€`PlayerState` DTOã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã«ç½®ãæ›ãˆ
- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆDamageReceived, PotionUsedãªã©ï¼‰ã®å°å…¥ã‚’æ¤œè¨

---

### 2.6 UserInteraction.cs

**å½±éŸ¿åº¦**: ğŸŸ¢ **ä½ï¼ˆUIå±¤ã¨ã—ã¦åˆ†é›¢ï¼‰**

**å•é¡Œç®‡æ‰€**:
- å…¨ä½“ï¼ˆå®Œå…¨ã«CLIä¾å­˜ï¼‰

**ä¾å­˜é–¢ä¿‚**:
- è‡ªå·±å®Œçµå‹ï¼ˆä»–ã®ã‚¯ãƒ©ã‚¹ã«ä¾å­˜ãªã—ï¼‰

**åˆ†é›¢æˆ¦ç•¥**:
- `GameEngine/UI/CLI/`ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
- CLIå®Ÿè£…å°‚ç”¨ã¨ã—ã¦ä¿æŒ
- Blazorå´ã§ã¯ä½¿ç”¨ã—ãªã„

---

## 3. UserInteractionã‚¯ãƒ©ã‚¹ã®å‘¼ã³å‡ºã—å…ƒ

### 3.1 å‘¼ã³å‡ºã—ç®‡æ‰€ã®ç‰¹å®š

| å‘¼ã³å‡ºã—å…ƒ | ãƒ¡ã‚½ãƒƒãƒ‰ | è¡Œç•ªå· | ç›®çš„ |
|-----------|---------|--------|------|
| **GameSystem.cs** | `SelectGameAction()` | L88 | ç¶šè¡Œãƒ»ã‚»ãƒ¼ãƒ–ãƒ»çµ‚äº†ã®é¸æŠ |
| **BattleManager.cs** | `SelectAttackStrategy()` | L81 | æ”»æ’ƒæˆ¦ç•¥ã®é¸æŠ |
| **ShopSystem.cs** | `ReadPositiveInteger()` | L24 | ãƒãƒ¼ã‚·ãƒ§ãƒ³è³¼å…¥æ•°ã®å…¥åŠ› |
| **RestSystem.cs** | `ReadPositiveInteger()` | L11 | ãƒãƒ¼ã‚·ãƒ§ãƒ³ä½¿ç”¨æ•°ã®å…¥åŠ› |

### 3.2 ä¾å­˜ã‚°ãƒ©ãƒ•

```
UserInteraction (é™çš„ã‚¯ãƒ©ã‚¹)
    â†‘
    â”œâ”€â”€ GameSystem.cs
    â”œâ”€â”€ BattleManager.cs
    â”œâ”€â”€ ShopSystem.cs
    â””â”€â”€ RestSystem.cs
```

**å½±éŸ¿åˆ†æ**:
- å…¨ã¦é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
- UIå…¥åŠ›å¾…æ©Ÿã«ã‚ˆã‚Šå‡¦ç†ãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°
- Blazorã§ã¯éåŒæœŸã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã«å¤‰æ›´ãŒå¿…è¦

---

## 4. åˆ†é›¢å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹

| ãƒ•ã‚¡ã‚¤ãƒ« | UIæ··åœ¨åº¦ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯é‡è¦åº¦ | åˆ†é›¢å„ªå…ˆåº¦ | æ¨å®šå·¥æ•° |
|---------|----------|----------------------|-----------|---------|
| **Player.cs** | ä½ | ğŸ”´ æœ€é«˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼‰ | â­â­â­â­â­ | 1h |
| **BattleManager.cs** | é«˜ | ğŸ”´ é«˜ | â­â­â­â­â­ | 4h |
| **GameSystem.cs** | é«˜ | ğŸ”´ é«˜ | â­â­â­â­ | 3h |
| **ShopSystem.cs** | é«˜ | ğŸŸ¡ ä¸­ | â­â­â­â­ | 3h |
| **EventManager.cs** | ä¸­ | ğŸŸ¡ ä¸­ | â­â­â­ | 2h |
| **RestSystem.cs** | ä½ | ğŸŸ¢ ä½ | â­â­ | 1h |
| **GameRecord.cs** | ä½ | ğŸŸ¢ ä½ | â­ | 0.5h |
| **UserInteraction.cs** | æœ€é«˜ | ğŸŸ¢ ä½ï¼ˆUIå±¤ï¼‰ | - | ç§»å‹•ã®ã¿ |

**åˆè¨ˆæ¨å®šå·¥æ•°**: ç´„14.5æ™‚é–“

---

## 5. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é›¢æ¡ˆ

### 5.1 ç¾åœ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆå•é¡Œã‚ã‚Šï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Program.cs (ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ)       â”‚
â”‚  â””â”€â”€ Console.ReadLine()             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GameSystem                          â”‚
â”‚  â”œâ”€â”€ Console.WriteLine() (13ç®‡æ‰€)   â”‚
â”‚  â””â”€â”€ UserInteraction.SelectAction() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EventManager                        â”‚
â”‚  â”œâ”€â”€ Console.WriteLine() (4ç®‡æ‰€)    â”‚
â”‚  â””â”€â”€ BattleManager / ShopSystem     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BattleManager / ShopSystem          â”‚
â”‚  â”œâ”€â”€ Console.WriteLine() (18ç®‡æ‰€)   â”‚
â”‚  â””â”€â”€ UserInteraction.SelectStrat()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Player (ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«)             â”‚
â”‚  â””â”€â”€ Console.WriteLine() (3ç®‡æ‰€) âŒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å•é¡Œç‚¹**:
- å…¨éšå±¤ã«UIä¾å­˜ãŒæ•£åœ¨
- ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼ˆPlayerï¼‰ãŒConsoleä¾å­˜
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å¾…æ©Ÿã§ãƒ­ã‚¸ãƒƒã‚¯ãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°

---

### 5.2 ç›®æ¨™ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆPhase 1-5å®Œäº†å¾Œï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          UI Layer (Presentation)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  CLI Frontend         â”‚  â”‚  Blazor Frontend     â”‚â”‚
â”‚  â”‚  - CliGameController â”‚  â”‚  - Game.razor        â”‚â”‚
â”‚  â”‚  - UserInteraction   â”‚  â”‚  - BattleView.razor  â”‚â”‚
â”‚  â”‚  (Console I/O)       â”‚  â”‚  (Web UI)            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Application Service Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  IGameService (Interface)                       â”‚â”‚
â”‚  â”‚  - InitializeGame(name) â†’ GameState             â”‚â”‚
â”‚  â”‚  - ExecuteAction(action) â†’ GameState            â”‚â”‚
â”‚  â”‚  - GetCurrentState() â†’ GameState                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  GameService (Implementation)                   â”‚â”‚
â”‚  â”‚  - âŒ Consoleä¾å­˜ãªã—                            â”‚â”‚
â”‚  â”‚  - âœ… GameState DTOã‚’è¿”ã™                        â”‚â”‚
â”‚  â”‚  - âœ… PlayerActionã‚’å—ã‘å–ã‚‹                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Core Domain Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Player, Enemy (ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«)                  â”‚â”‚
â”‚  â”‚  - âŒ Consoleä¾å­˜ãªã—                            â”‚â”‚
â”‚  â”‚  - âœ… ç´”ç²‹ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Manager (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯)                      â”‚â”‚
â”‚  â”‚  - HealthManager, InventoryManager              â”‚â”‚
â”‚  â”‚  - ExperienceManager, CombatManager             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Factory (ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯)                          â”‚â”‚
â”‚  â”‚  - EnemyFactory, WeaponFactory                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ”¹å–„ç‚¹**:
- âœ… UIä¾å­˜ãŒå®Œå…¨ã«åˆ†é›¢ï¼ˆUI Layer ã®ã¿ï¼‰
- âœ… ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒã‚¯ãƒªãƒ¼ãƒ³
- âœ… è¤‡æ•°UIãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å®Ÿè£…ãŒå¯èƒ½
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå¯èƒ½

---

## 6. é‡è¦ãªæŠ€è¡“çš„èª²é¡Œ

### 6.1 ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°I/Oã®æ’é™¤

**ç¾çŠ¶**:
```csharp
// BattleManager.cs L81
var attackStrategyName = UserInteraction.SelectAttackStrategy();
// â†‘ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å¾…æ©Ÿã§ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ–ãƒ­ãƒƒã‚¯
_player.ChangeAttackStrategy(attackStrategyName);
```

**å¤‰æ›´å¾Œ**:
```csharp
// GameService.cs
public GameState ExecuteBattleTurn(AttackAction action)
{
    _player.ChangeAttackStrategy(action.StrategyName);
    // â†‘ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹ï¼ˆãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ï¼‰
}
```

---

### 6.2 ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã®UIæ’é™¤

**ç¾çŠ¶ï¼ˆPlayer.cs L96ï¼‰**:
```csharp
public void TakeDamage(int damage)
{
    // ... ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®— ...
    Console.WriteLine($"{Name} takes {actualDamage} damage! Remaining HP: {HP}");
    // â†‘ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãŒConsoleä¾å­˜ âŒ
}
```

**å¤‰æ›´å¾Œ**:
```csharp
public void TakeDamage(int damage)
{
    // ... ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã®ã¿ ...
    // Console.WriteLineã¯å‰Šé™¤
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯GameServiceå´ã§ç”Ÿæˆ
}
```

---

### 6.3 é™çš„ã‚¯ãƒ©ã‚¹ã®ä¾å­˜å•é¡Œ

**ç¾çŠ¶**:
- `UserInteraction`: é™çš„ã‚¯ãƒ©ã‚¹ â†’ DIã§ããªã„
- `ShopSystem`: é™çš„ãƒ¡ã‚½ãƒƒãƒ‰ â†’ ãƒ†ã‚¹ãƒˆå›°é›£
- `GameRecord`: é™çš„çŠ¶æ…‹ â†’ ãƒãƒ«ãƒãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å…±æœ‰ã•ã‚Œã‚‹ï¼ˆâš ï¸ãƒã‚°ï¼‰

**å¤‰æ›´æ¡ˆ**:
- `UserInteraction` â†’ `IInputProvider`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åŒ–
- `ShopSystem` â†’ `ShopService`ã‚¯ãƒ©ã‚¹ã«å¤‰æ›
- `GameRecord` â†’ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã”ã¨ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¤‰æ›´

---

## 7. Phase 1ã¸ã®æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### 7.1 å³åº§ã«ç€æ‰‹ã™ã¹ãé …ç›®

1. **Player.csã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæœ€å„ªå…ˆï¼‰**
   - `TakeDamage()`ã‹ã‚‰Console.WriteLineå‰Šé™¤
   - `UsePotion()`ã‹ã‚‰Console.WriteLineå‰Šé™¤
   - `ShowInfo()`ã®å»ƒæ­¢

2. **DTOãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ**
   - `GameState.cs`
   - `PlayerAction.cs`ï¼ˆAttackAction, ShopAction, etc.ï¼‰
   - `PlayerState.cs`, `EnemyState.cs`, `BattleState.cs`

3. **IGameServiceã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©**
   - ãƒ¡ã‚½ãƒƒãƒ‰ã‚·ã‚°ãƒãƒãƒ£ã®ç¢ºå®š
   - éåŒæœŸãƒ¡ã‚½ãƒƒãƒ‰ã®æ¤œè¨ï¼ˆSaveGameAsyncç­‰ï¼‰

---

### 7.2 Phase 1ã®å®Œäº†åˆ¤å®šåŸºæº–

- [ ] `GameEngine/Models/GameState.cs`ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] `GameEngine/Models/PlayerAction.cs`ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] `Player.cs`ã‹ã‚‰å…¨ã¦ã®Consoleä¾å­˜ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
- [ ] DTOãƒãƒƒãƒ‘ãƒ¼ï¼ˆPlayer â†’ PlayerStateï¼‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ãŒå‹•ä½œã™ã‚‹ã“ã¨ãŒç¢ºèªã•ã‚Œã¦ã„ã‚‹

---

## 8. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| æ—¢å­˜æ©Ÿèƒ½ã®ç ´å£Š | ğŸ”´ é«˜ | Phase 1å®Œäº†å¾Œã«å…¨æ©Ÿèƒ½ã®å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ |
| DTOè¨­è¨ˆã®ä¸å‚™ | ğŸŸ¡ ä¸­ | å®Ÿè£…å‰ã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| é™çš„ã‚¯ãƒ©ã‚¹ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | ğŸŸ¡ ä¸­ | æ®µéšçš„ã«ç§»è¡Œï¼ˆæ—§ã‚³ãƒ¼ãƒ‰ä¿æŒï¼‰ |
| GameRecordã®å…±æœ‰çŠ¶æ…‹ãƒã‚° | ğŸ”´ é«˜ | GameStateã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚’è¿½åŠ  |

---

## 9. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆPhase 1ã¸ã®ç§»è¡Œï¼‰

1. âœ… **Phase 0å®Œäº†**: ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—ä½œæˆå®Œäº†
2. â­ï¸ **Phase 1é–‹å§‹**: DTOãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…
3. ğŸ“ **ã‚¿ã‚¹ã‚¯**: ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   - `GameEngine/Models/GameState.cs`
   - `GameEngine/Models/PlayerAction.cs`
   - `GameEngine/Models/DTOMappers.cs`

---

## 10. å‚è€ƒãƒ‡ãƒ¼ã‚¿

### 10.1 Consoleä¾å­˜ç®‡æ‰€ã®å®Œå…¨ãƒªã‚¹ãƒˆ

```
GameSystem.cs:
  L33: Console.WriteLine($"Warning: ã‚»ãƒ¼ãƒ–æ©Ÿèƒ½ã‚’åˆæœŸåŒ–ã§ãã¾ã›ã‚“ã§ã—ãŸ: {ex.Message}");
  L34: Console.WriteLine("ã‚²ãƒ¼ãƒ ã¯ã‚»ãƒ¼ãƒ–æ©Ÿèƒ½ãªã—ã§ç¶šè¡Œã•ã‚Œã¾ã™ã€‚");
  L52: Console.WriteLine("\n=== Game Start ===");
  L57: Console.WriteLine("\n--- New Encounter ---");
  L72: Console.WriteLine("\nGame ended by player choice.");
  L88: UserInteraction.SelectGameAction() // é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
  L104: Console.WriteLine("\nã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¾ã™ã€‚");
  L108: Console.WriteLine("\nç„¡åŠ¹ãªé¸æŠã§ã™ã€‚ã‚²ãƒ¼ãƒ ã‚’ç¶šè¡Œã—ã¾ã™ã€‚");
  L120-121: Console.WriteLine (ã‚»ãƒ¼ãƒ–ã‚¨ãƒ©ãƒ¼)
  L132: Console.WriteLine("âœ“ ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚");
  L137: Console.WriteLine($"\nâœ— ã‚»ãƒ¼ãƒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: {ex.Message}");
  L146-164: Console.WriteLine (ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢)

BattleManager.cs:
  L26: Console.WriteLine($"A wild {enemy.Name} appears!\n");
  L32: Console.WriteLine($"Error starting battle: {ex.Message}");
  L47: Console.WriteLine($"\n--- Turn {battleTurn} ---");
  L81: UserInteraction.SelectAttackStrategy() // é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
  L89-91: Console.WriteLine (æ”»æ’ƒãƒ­ã‚°)
  L103-105: Console.WriteLine (æ•µæ”»æ’ƒãƒ­ã‚°)
  L113-115: Console.WriteLine (æˆ¦é—˜çŠ¶æ…‹)
  L123: Console.WriteLine($"\n{enemy.Name} has been defeated!");
  L137: Console.WriteLine($"\n{_player.Name} has fallen...");

ShopSystem.cs:
  L10-18: Console.WriteLine (ã‚·ãƒ§ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼)
  L21: Console.ReadKey(intercept: true)
  L24: UserInteraction.ReadPositiveInteger() // é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
  L33-38: Console.WriteLine (æ­¦å™¨é¸æŠ)
  L39: Console.ReadKey(intercept: true)
  L54: Console.WriteLine("Invalid choice.");

EventManager.cs:
  L42: Console.WriteLine("Unknown event occurred.");
  L70: Console.WriteLine("\n=== You found a shop! ===\n");
  L78: Console.WriteLine($"You received {goldReward} gold as a discovery bonus!");
  L84: Console.WriteLine($"\nStatus - {_player.Name}: {_player.HP} HP");
  L97: Console.WriteLine("\n=== You encounter a wild enemy! ===\n");

Player.cs:
  L96: Console.WriteLine($"{Name} takes {actualDamage} damage! Remaining HP: {HP}");
  L113: Console.WriteLine($"You heal {amount} HP");
  L167: Console.WriteLine("-------------------------------------------------------------------");
  (ShowInfo()å†…ã«ã•ã‚‰ã«å¤šæ•°)
```

---

## ã¾ã¨ã‚

### âœ… Phase 0ã§æ˜ã‚‰ã‹ã«ãªã£ãŸã“ã¨

1. **Consoleä¾å­˜ç®‡æ‰€**: åˆè¨ˆ75ç®‡æ‰€
2. **æœ€é‡è¦å•é¡Œ**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼ˆPlayer.csï¼‰ã«UIä¾å­˜ãŒå­˜åœ¨
3. **UIæ··åœ¨ãƒ•ã‚¡ã‚¤ãƒ«**: 8ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå„ªå…ˆåº¦ä»˜ã‘å®Œäº†ï¼‰
4. **é™çš„ã‚¯ãƒ©ã‚¹ä¾å­˜**: UserInteraction, ShopSystem, GameRecord

### ğŸ¯ Phase 1ã¸ã®æº–å‚™å®Œäº†

- ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—ä½œæˆå®Œäº†
- åˆ†é›¢å„ªå…ˆåº¦ã®æ±ºå®šå®Œäº†
- DTOãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆæ–¹é‡ç¢ºå®š
- ãƒªã‚¹ã‚¯è©•ä¾¡å®Œäº†

### ğŸ“Š æ¨å®šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœŸé–“

- Phase 1: 2æ—¥é–“ï¼ˆDTOãƒ¢ãƒ‡ãƒ«ä½œæˆï¼‰
- Phase 2: 3æ—¥é–“ï¼ˆGameServiceå®Ÿè£…ï¼‰
- Phase 3: 2æ—¥é–“ï¼ˆCLI UIå†æ§‹ç¯‰ï¼‰
- Phase 4: 3æ—¥é–“ï¼ˆBlazor UIå®Ÿè£…ï¼‰
- Phase 5: 2æ—¥é–“ï¼ˆãƒ†ã‚¹ãƒˆã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰
- **åˆè¨ˆ**: ç´„12æ—¥é–“ï¼ˆå®Ÿç¨¼åƒï¼‰

---

**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Phase 1ã®`GameState.cs`ã¨`PlayerAction.cs`ã®å®Ÿè£…ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚
